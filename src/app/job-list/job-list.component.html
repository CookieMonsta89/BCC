<mat-card class="example-card">
  <mat-card-header>
    <mat-card-title>Add New Job</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <form>
      <table [formGroup]="jobForm">
        <tr>
          <td>
            <mat-form-field>
              <input matInput placeholder="Job Number" formControlName="jobNumber" name="jobNumber" required>
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>
            <mat-form-field>
              <input matInput placeholder="First Name" formControlName="ownerFirstName" name="ownerFirstName" required>
            </mat-form-field>
          </td>
          <td>
            <mat-form-field>
              <input matInput placeholder="Last Name" formControlName="ownerLastName" name="ownerLastName" required>
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>
            <mat-form-field>
              <input matInput placeholder="Phone Number" formControlName="ownerPhoneNumber" name="ownerPhoneNumber" required>
              <mat-error *ngIf="ownerPhoneNumber.invalid && ownerPhoneNumber.errors.pattern">Invalid phone number</mat-error>
            </mat-form-field>
          </td>
          <td>
            <mat-form-field>
              <input matInput placeholder="Email" formControlName="ownerEmail" name="ownerEmail" required>
              <mat-error *ngIf="ownerEmail.invalid && ownerEmail.errors.email">Invalid email address</mat-error>
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>
            <mat-form-field>
              <input matInput placeholder="Street Address" formControlName="ownerStreetAddress" name="ownerStreetAddress" required>
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>
            <mat-form-field>
              <input matInput placeholder="City" formControlName="ownerCity" name="ownerCity" required>
            </mat-form-field>
          </td>
          <td>
            <mat-form-field>
              <input matInput placeholder="State" formControlName="ownerState" name="ownerState" required>
            </mat-form-field>
          </td>
          <td>
            <mat-form-field>
              <input matInput placeholder="Zipcode" formControlName="ownerZipcode" name="ownerZipcode" required>
            </mat-form-field>
          </td>
        </tr>
      </table>
    </form>
  </mat-card-content>
  <mat-card-actions>
    <button mat-raised-button (click)="createJob()" color="primary">Create Job</button>
  </mat-card-actions>
</mat-card>

<mat-table #table [dataSource]="dataSource" matSort *ngIf="!loading">
  <ng-container *ngFor="let col of columnDefs" [matColumnDef]="col.name">
    <mat-header-cell *matHeaderCellDef mat-sort-header>{{ col.title }}</mat-header-cell>
    <mat-cell class="table-cell" *matCellDef="let row">
      {{ getProperty(row, col.name) }}
    </mat-cell>
  </ng-container>

  <mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></mat-header-row>
  <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
</mat-table>

<mat-card *ngIf="loading" class="center-card">
  <mat-progress-spinner
    color="primary"
    mode="indeterminate">
  </mat-progress-spinner>
</mat-card>
